{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ddbba2c8_236589fe",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "One thing that is not mentioned in this design is how the new file is bound to the old data in the HSM backend. The relation between Lustre and the HSM backend is done using an xattr (for our copytools at least) where we store `\u003cfsname\u003e:\u003cfid\u003e`. If you create a new file in Lustre, you have a new FID. Which means that this breaks the releationship between Lustre and the HSM backend. Copytools usually have functionnalities to rebind new fids with old data. rbh-undelete (v3) is able to run the copytool\u0027s command to make sure that everything is aligned. You also have to set the appropriate xattr as mentionned previously.\n\nAlso, an interesting use case that I think is not yet supported by rbh3 is versionning. We could have an option to overwrite the current content of the file with the content in the HSM backend. With phobos for instance, we could list all the versions and restore the one we want.\n\nAnother aspect not discussed here is what if a new file was created with the same name ? Could we provide a different path to restore the file ?",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 12
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14efd8bd_5e33d704",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-14T07:35:36Z",
      "side": 1,
      "message": "One more thing that is really important is to have a `--dry-run` option. So that you can run it and see what it is supposed to do without touching the filesystem.",
      "parentUuid": "ddbba2c8_236589fe",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 12
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc9ea8b4_b904bd73",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2025-05-14T07:14:34Z",
      "side": 1,
      "message": "comment: when reading the document, I noticed that is was written with a heavy **file** bias, and I don\u0027t criticize it, as we mainly think of RBH with Lustre\n\nBut that makes me wonder if this tool is interesting for object systems: if we have an HSM system, we may want to also undelete objects that are not stored anymore in the first tier, using their old `id`/`bucket:id` or whatever?\n\nSo, do we need to write this design in a more generic way?",
      "range": {
        "startLine": 12,
        "startChar": 35,
        "endLine": 12,
        "endChar": 40
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a53eb8fb_ed83074f",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "The file is not archived in the database. The metadata of the file is in the database but the content is stored elsewhere. For Lustre-HSM, it is stored in the HSM backend (e.g. Phobos or HPSS). In rbh3, there is the backup module that lets you store backups of your data in another filesystem. rbh-undelete in this case will simply copy back the file from the external filesystem.",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 17
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dca92234_b0eceef2",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: files are not archived in a database",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 18
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2d489c5_658e5c8d",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: the feature should be generic first, and then detailled for Lustre",
      "range": {
        "startLine": 18,
        "startChar": 70,
        "endLine": 19,
        "endChar": 3
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54e171c0_ba953dfd",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: same",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 17
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70bce482_5c60eeda",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "style: put in quotation or something similar so that it stands out",
      "range": {
        "startLine": 20,
        "startChar": 50,
        "endLine": 20,
        "endChar": 66
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d46be04_db8d31a1",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "This is Lustre specific. rbh3 has a more generic import feature.",
      "range": {
        "startLine": 20,
        "startChar": 19,
        "endLine": 21,
        "endChar": 17
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f04a01ef_8aebf4ed",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: that\u0027s not what it does",
      "range": {
        "startLine": 20,
        "startChar": 68,
        "endLine": 21,
        "endChar": 17
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a7e235a_e042c0e2",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: maybe showing the call and explaining it would be nice",
      "range": {
        "startLine": 21,
        "startChar": 19,
        "endLine": 21,
        "endChar": 62
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61ac6130_44dbb746",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: which is ?",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 23,
        "endChar": 15
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5ed298d_5b37a9f8",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: what are they ?",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 26,
        "endChar": 8
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7ee34d0_d352a9fd",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "Therefore is incorrect here.",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 27,
        "endChar": 9
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44a8bda3_f874e812",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: rephrase, `destination` means nothing here",
      "range": {
        "startLine": 27,
        "startChar": 37,
        "endLine": 28,
        "endChar": 25
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9230c17_5aa20ade",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: there is not \"a path per database\", there is \"a path per hard link in the database\"",
      "range": {
        "startLine": 28,
        "startChar": 70,
        "endLine": 29,
        "endChar": 26
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd2c77ce_05ce05ca",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: these sentences are the same",
      "range": {
        "startLine": 28,
        "startChar": 53,
        "endLine": 30,
        "endChar": 55
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f61dedce_a8d88165",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: which command ?",
      "range": {
        "startLine": 31,
        "startChar": 15,
        "endLine": 31,
        "endChar": 37
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06e901f6_586fee6e",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: storing where, as what ?",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 33,
        "endChar": 77
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d764c0e_d09ae57a",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "In rbh3, you can pass the full path that you want to restore. What usually happens is that a user removes a file and wants to retrieve it. They ask the support team for the restoration giving the path(s) of the file(s) to restore. So in practice, it is expected that the admin running the command will have the full path. No need to do it relative to the root of the FS.",
      "range": {
        "startLine": 34,
        "startChar": 63,
        "endLine": 35,
        "endChar": 36
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07d240c2_ec506d76",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "typo: store",
      "range": {
        "startLine": 37,
        "startChar": 47,
        "endLine": 37,
        "endChar": 53
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2622b0a9_47f66626",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "typo: store",
      "range": {
        "startLine": 37,
        "startChar": 47,
        "endLine": 37,
        "endChar": 53
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4310ffa_80ec033c",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "Regarding my previous comment, I don\u0027t think this is an issue. You can expect users to provide the full path. And I would argue that it is less confusing to use the full path for something like this.",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 40,
        "endChar": 55
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cd26066_47b564dc",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "question: how does RBH3 do it ?",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 40,
        "endChar": 56
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07f2016c_967d1dba",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2025-05-14T07:14:34Z",
      "side": 1,
      "message": "In this case, we can just forbid the use of a relative path?",
      "parentUuid": "a4310ffa_80ec033c",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 40,
        "endChar": 55
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15d6e49e_6246e257",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-14T07:35:36Z",
      "side": 1,
      "message": "By full path I mean: if the user provides a full path, it should contain the mount point not the \"path\" stored in the DB by robinhood without mountpoint. But it can also be a relative path, in which case the command is expected to be run in the right directory.\n\nOr more simply, open should always work on the path provided by the user.",
      "parentUuid": "07f2016c_967d1dba",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 40,
        "endChar": 55
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5dda364_8a6a30de",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: rephrase, I don\u0027t understand the sentence",
      "range": {
        "startLine": 42,
        "startChar": 13,
        "endLine": 43,
        "endChar": 11
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc68f97b_32a5a355",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "Another important info is the deletion time. Or at least the time when robinhood saw that the file was removed.\nold_path might be confusing. Maybe something like this would be better: `\"ns\": { \"xattrs\": { \"rm\": {\"time\": 1234, \"path\": \"/foo\" } } }`",
      "range": {
        "startLine": 46,
        "startChar": 1,
        "endLine": 46,
        "endChar": 9
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3a26873_39a817a4",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: where would it be stored in the database schema ?",
      "range": {
        "startLine": 45,
        "startChar": 55,
        "endLine": 46,
        "endChar": 10
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a7c3b07_a4db5bc0",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "typo: store",
      "range": {
        "startLine": 47,
        "startChar": 12,
        "endLine": 47,
        "endChar": 18
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d3cfd37_49027d1d",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "typo: store",
      "range": {
        "startLine": 47,
        "startChar": 12,
        "endLine": 47,
        "endChar": 18
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "488e17b7_1880fcc4",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "Why is this optional?",
      "range": {
        "startLine": 55,
        "startChar": 47,
        "endLine": 55,
        "endChar": 57
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1574d159_777036ee",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "defect: how is it optionnal ? Both of the options require a path in any case",
      "range": {
        "startLine": 55,
        "startChar": 47,
        "endLine": 55,
        "endChar": 57
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ddd0c3c3_2f4b00b9",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 60,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "You should also allow restoring a directory",
      "range": {
        "startLine": 60,
        "startChar": 3,
        "endLine": 60,
        "endChar": 14
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c0cc26a_c896c4a5",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "What is the point of having both the name and the path?\n\nYou should also add the rm time in the output.\n\nFor lustre, undelete by FID must be supported as well.\n\nFor instance: `rbh-undelete rbh:mongo:myfs -R \u003cfid\u003e path/to/new/destination`",
      "range": {
        "startLine": 63,
        "startChar": 4,
        "endLine": 63,
        "endChar": 23
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2b5fb68_2c24907a",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2025-05-14T07:14:34Z",
      "side": 1,
      "message": "For the last point, it means we need to let the backend manage the `id` argument, and see if this can be a path, a backend ID, or anything else.",
      "parentUuid": "3c0cc26a_c896c4a5",
      "range": {
        "startLine": 63,
        "startChar": 4,
        "endLine": 63,
        "endChar": 23
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de40a6e3_694521c4",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "defect: why would this be an option and not the default behaviour ? What\u0027s the default behaviour if not given ?",
      "range": {
        "startLine": 66,
        "startChar": 41,
        "endLine": 66,
        "endChar": 50
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9011e11c_53d597de",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 66,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-14T07:35:36Z",
      "side": 1,
      "message": "In v3, you have to provide either -R or -L. Providing nothing simply displays the help. This command can be quite dangerous. If you don\u0027t run it properly you might lose a file or some data. It don\u0027t think we should do a restore by default.",
      "parentUuid": "de40a6e3_694521c4",
      "range": {
        "startLine": 66,
        "startChar": 41,
        "endLine": 66,
        "endChar": 50
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1c70e30_e88e8c1a",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "minor: its behaviour has not been explained before",
      "range": {
        "startLine": 70,
        "startChar": 45,
        "endLine": 70,
        "endChar": 72
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4f7b972_6210bbea",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "Instead of this sentence that does not really provide additional info, you can simply say what this URI will refer to.",
      "range": {
        "startLine": 77,
        "startChar": 0,
        "endLine": 79,
        "endChar": 14
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2bf41628_8ca83b88",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: the `path` parameter is explained by what to do when we don\u0027t know it. Explain the path here instead",
      "range": {
        "startLine": 86,
        "startChar": 0,
        "endLine": 87,
        "endChar": 65
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6add8f8c_ba374962",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: as said before, the `--restore` flag should be default",
      "range": {
        "startLine": 92,
        "startChar": 50,
        "endLine": 92,
        "endChar": 73
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7607f495_87dcf0a2",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-14T07:35:36Z",
      "side": 1,
      "message": "-1",
      "parentUuid": "6add8f8c_ba374962",
      "range": {
        "startLine": 92,
        "startChar": 50,
        "endLine": 92,
        "endChar": 73
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "464f0a31_ddb9b26d",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 93,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2025-05-14T07:14:34Z",
      "side": 1,
      "message": "question: why is this a `rbh-undelete` mode? we cannot use a `rbh-find` command to retrieve this information?",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 93,
        "endChar": 53
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c2c61c8_b3147b3e",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 93,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-14T07:35:36Z",
      "side": 1,
      "message": "This is what v3\u0027s undelete does. We can definitly support this in rbh-find as well but the usual approach is to run `rbh-undelete -L` first to see what is available and then `rbh-undelete -R` if appropriate. This makes it easier for people running the command. Also, note that these sort of commands are usually not run by robinhood experts so we should make it as simple as possible.",
      "parentUuid": "464f0a31_ddb9b26d",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 93,
        "endChar": 53
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7816053_5e74155a",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "typo: Lustre not Lustre\u0027s",
      "range": {
        "startLine": 100,
        "startChar": 44,
        "endLine": 100,
        "endChar": 52
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "682c7916_469842dd",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2025-05-13T14:55:36Z",
      "side": 1,
      "message": "major: not necessarily, the tool can be generic, and rely on a backend\u0027s callback for instance. That way there is no Lustre requirement for the tool, the only requirement would be the requested backend has a way of undeleting entries",
      "range": {
        "startLine": 100,
        "startChar": 6,
        "endLine": 100,
        "endChar": 66
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4931bc68_d3b4cdf8",
        "filename": "designs/rbh-undelete.rst",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2025-05-13T14:45:12Z",
      "side": 1,
      "message": "This is vary vague. In the current state of librobinhood this is not possible as there is no mecanism to import a file from the backend. This design does not mention the features required in librobinhood\u0027s backend API to add this feature. This should be discussed.",
      "range": {
        "startLine": 102,
        "startChar": 49,
        "endLine": 104,
        "endChar": 65
      },
      "revId": "9ba4dfd65e71e62f27fc380e80a5c2db22e5ae03",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}