{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2a323ea5_5f3ad7ec",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2025-12-15T13:30:02Z",
      "side": 1,
      "message": "defect: you need to destroy the backend but I think you need to destroy it after using your iterator. Maybe you should retrieve the backend at the start and use it here and when you retrieve the plugin/extensions.",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a848157a_99c11c89",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1038163
      },
      "writtenOn": "2026-02-02T15:15:30Z",
      "side": 1,
      "message": "After checking the different iterator structures, none of them store the backend address, so we can destroy it in this function without any problems.",
      "parentUuid": "2a323ea5_5f3ad7ec",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ef64120_8819eab2",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2026-02-04T08:51:46Z",
      "side": 1,
      "message": "Still not sure of that, maybe need to investigate more, or just release the backend a the end of the process, not of the function.",
      "parentUuid": "a848157a_99c11c89",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fc8d1965_28042536",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2026-02-04T09:12:53Z",
      "side": 1,
      "message": "Haven\u0027t read the rest of the stack (yet) but here you\u0027re searching only for one entry, as the projection indicate. Plus the function\u0027s name imply you collect an fsentry. So to me, it makes sense to rather get the iterator, iterate on it to retrieve an entry, and return it. In that case, destroying the backend in this function shouldn\u0027t be any issue I think.\n\nDo you agree ?\n\nOtherwise yes I think what you\u0027re doing here is an issue, because the iter_next called after destroying the backend will most likely fail because of multiple fields being undefined/freed, for instance the enrichers.",
      "parentUuid": "6ef64120_8819eab2",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac2067cc_cccb0632",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2026-02-04T09:15:03Z",
      "side": 1,
      "message": "It needs to be tested because destroying the backend release the client and the collection used to create the iterator. Either the connection to the iterator\u0027s db is independent, in which case it\u0027s fine, or it is tied to the client, and destroying the client also closes the iterator\u0027s connection.",
      "parentUuid": "6ef64120_8819eab2",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3a8f2e79_629a15c2",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 19,
      "author": {
        "id": 1038163
      },
      "writtenOn": "2026-02-04T11:55:21Z",
      "side": 1,
      "message": "I chose to add the backend in the function parameters, as initially suggested by Gauthier, this is surely the best option. I have modified all the relevant patches accordingly to carry this backend.",
      "parentUuid": "ac2067cc_cccb0632",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fe6b2cd_8540a5be",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1017196
      },
      "writtenOn": "2025-12-23T08:01:41Z",
      "side": 1,
      "message": "question: are you sure about the parametrization here? do we want to allow anyone to configure this?",
      "range": {
        "startLine": 24,
        "startChar": 8,
        "endLine": 24,
        "endChar": 18
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e359b14_2b947769",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1038163
      },
      "writtenOn": "2026-02-02T15:15:30Z",
      "side": 1,
      "message": "We want to retrieve all entries that match the filter in the database, that\u0027s what we\u0027re doing here with these options, which aren\u0027t configurable by the user. It\u0027s later, when applying the rules or before applying the action, that we can give the user the ability to configure their query.",
      "parentUuid": "3fe6b2cd_8540a5be",
      "range": {
        "startLine": 24,
        "startChar": 8,
        "endLine": 24,
        "endChar": 18
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a6133a7_16891b29",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 40,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2025-12-15T13:30:02Z",
      "side": 1,
      "message": "style: define these variables at the start",
      "range": {
        "startLine": 23,
        "startChar": 4,
        "endLine": 40,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89c2e27b_293173f9",
        "filename": "librobinhood/src/policyengine.c",
        "patchSetId": 9
      },
      "lineNbr": 40,
      "author": {
        "id": 1038163
      },
      "writtenOn": "2026-02-02T15:15:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5a6133a7_16891b29",
      "range": {
        "startLine": 23,
        "startChar": 4,
        "endLine": 40,
        "endChar": 31
      },
      "revId": "59ab0537198d37a008a298e7fddc3fd7d7daf246",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}