{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6ad485ea_2578a9df",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2024-04-19T11:32:55Z",
      "side": 1,
      "message": "type: 2024",
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60c5211f_687a6e98",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6ad485ea_2578a9df",
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64406a3a_93b48361",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-19T07:44:42Z",
      "side": 1,
      "message": "suggest: you could simply do\n\n```\ncmd \u0026\u0026\n   error \"should fail\"\n```",
      "range": {
        "startLine": 26,
        "startChar": 4,
        "endLine": 26,
        "endChar": 7
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebc814d3_f8cf2ed7",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "64406a3a_93b48361",
      "range": {
        "startLine": 26,
        "startChar": 4,
        "endLine": 26,
        "endChar": 7
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "973b23ac_f2487204",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-05-14T16:00:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "64406a3a_93b48361",
      "range": {
        "startLine": 26,
        "startChar": 4,
        "endLine": 26,
        "endChar": 7
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28cc35be_bf23b908",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2024-04-19T11:32:55Z",
      "side": 1,
      "message": "question: This test and the one above are not identical ?",
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3531f5d3_051a5e40",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "No because the one above tests that even if we have integers before non-digits, the parsing fails, and we do not filter on the value \"42\". This one tests that we do not consider string as valid filter values, except default.",
      "parentUuid": "28cc35be_bf23b908",
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "733d34cf_0636df96",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1037727
      },
      "writtenOn": "2024-04-22T09:42:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3531f5d3_051a5e40",
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3048d96c_07e35509",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-19T07:44:42Z",
      "side": 1,
      "message": "not need to use lfs if you don\u0027t want to specify the MDT on which the directory should be created.",
      "range": {
        "startLine": 48,
        "startChar": 4,
        "endLine": 48,
        "endChar": 8
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3e4e242_733ab448",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3048d96c_07e35509",
      "range": {
        "startLine": 48,
        "startChar": 4,
        "endLine": 48,
        "endChar": 8
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad2cf491_21f2bfb6",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-05-14T16:00:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3048d96c_07e35509",
      "range": {
        "startLine": 48,
        "startChar": 4,
        "endLine": 48,
        "endChar": 8
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b34ee4d_81d193a8",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-19T07:44:42Z",
      "side": 1,
      "message": "nit: to make the test a bit more explicit, you could name this variable \"default_stripe_count\". Because what we are checking here is that setting the default stripe count explicitly doesn\u0027t make it a directory with no stripe that is catched by the default filter.",
      "range": {
        "startLine": 61,
        "startChar": 24,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ee3ea5f_a008ac5c",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b34ee4d_81d193a8",
      "range": {
        "startLine": 61,
        "startChar": 24,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5bdf6d4d_eb574744",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-05-14T16:00:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b34ee4d_81d193a8",
      "range": {
        "startLine": 61,
        "startChar": 24,
        "endLine": 61,
        "endChar": 40
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbc3a8b6_56fbc307",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-19T07:44:42Z",
      "side": 1,
      "message": "nit/style:\n\n```\nrbh_lfind \"rbh:mongo:$testdb\" \\\n    -stripe-count $(lfs getstripe -c $LUSTRE_DIR | xargs) |\n        sort | difflines\n```",
      "range": {
        "startLine": 130,
        "startChar": 4,
        "endLine": 131,
        "endChar": 58
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e015008_34d43cc5",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dbc3a8b6_56fbc307",
      "range": {
        "startLine": 130,
        "startChar": 4,
        "endLine": 131,
        "endChar": 58
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76548b84_8ad3dffe",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 131,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-05-14T16:00:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dbc3a8b6_56fbc307",
      "range": {
        "startLine": 130,
        "startChar": 4,
        "endLine": 131,
        "endChar": 58
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4dd0cf7_c30ee3be",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-19T07:44:42Z",
      "side": 1,
      "message": "question: shouldn\u0027t you have / and /$dir here? You are asking for the default striping so this should return both of these entries.",
      "range": {
        "startLine": 132,
        "startChar": 15,
        "endLine": 132,
        "endChar": 24
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "724870b6_f8ed2845",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-04-22T08:07:59Z",
      "side": 1,
      "message": "No because I\u0027m not asking for the default striping but for the stripe count 1, as lfs getstripe does some stuff and will output 1 when asked the stripe count of the mount point while it hasn\u0027t been set yet.\n\nSo I\u0027m not asking the default stripe count, which mean only the entries with a stripe count of 1 should get filtered, which is none of them.",
      "parentUuid": "b4dd0cf7_c30ee3be",
      "range": {
        "startLine": 132,
        "startChar": 15,
        "endLine": 132,
        "endChar": 24
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4fd7493_82af24c2",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2024-04-25T09:10:25Z",
      "side": 1,
      "message": "I\u0027m fine with leaving this as is for now but we need to investigate what \"stuff\" lfs does. We should have the same behavior as lfs when appropriate/possible.",
      "parentUuid": "724870b6_f8ed2845",
      "range": {
        "startLine": 132,
        "startChar": 15,
        "endLine": 132,
        "endChar": 24
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1af10824_2b280dff",
        "filename": "rbh-find-lustre/tests/test_stripe_count.bash",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2024-05-14T16:00:31Z",
      "side": 1,
      "message": "Here, I am filtering which have a stripe count equal to the one of the mount point. However, lfs getstripe on the mount point before we set anything will return an actual value (here, 1). So we filter all entries with a stripe count of 1.\n\nThe thing is that while we do not set a default stripe count for the mount point, it does not have any. lfs getstripe returns something because it\u0027s lfs getstripe doing stuff, but not the actual value for the mount point.\n\nSo since there is no stripe count on the mount point, we consider there is no default value to filter on, which means we don\u0027t retrieve every entry with a default stripe count.\n\nTherefore, the final filter ends up being just on entries with a stripe count of 1, which there is none, because $file has a stripe count of 4, and / and $dir have a default stripe count.\n\n\n\nLustre is easy.",
      "parentUuid": "b4dd0cf7_c30ee3be",
      "range": {
        "startLine": 132,
        "startChar": 15,
        "endLine": 132,
        "endChar": 24
      },
      "revId": "97e92f71c07411ce4ee20d2a7f01bb87d39eef90",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}